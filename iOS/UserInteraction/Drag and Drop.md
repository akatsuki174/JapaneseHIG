翻訳元：[Drag and Drop](https://developer.apple.com/design/human-interface-guidelines/ios/user-interaction/drag-and-drop/)

# ドラッグ＆ドロップ

指一本である場所からコンテンツをドラッグし、別の場所で指を離してそれをドロップすることで、選択した写真、テキスト、その他コンテンツを移動、複製することができます。

[動画]

選択したコンテンツにタッチして持った状態にすると、コンテンツが浮き上がってユーザの指に付いているように見えます。コンテンツがドラッグされている時は、アニメーションと視覚的な手がかりによって移動できる場所を見極めることができます。ドロップが不可能な場合や、移動ではなく複製になる場合は、システム側でバッジを付けてくれます。開発者向けガイダンスは[UIKit](https://developer.apple.com/documentation/uikit)の[Drag and Drop](https://developer.apple.com/documentation/uikit/drag_and_drop)をご覧ください。

## 移動元と移動先

ドラッグ＆ドロップは、選択したコンテンツをある場所から目的地まで移動させることができます。移動できる場所はテキストビューのように同じコンテナの中にあっても、スプリットビューの反対側にあるテキストビューのように別のコンテナにあっても良いです。例えばノートアプリでは、同じノート内の新しい場所にドラッグすることができます。リマインダーアプリではあるリストの個々のリマインダーをドラッグして別のリストにドロップすることができます。

[スクショ]

iPadではアプリが移動元と移動先で異なる場合もあり、SafariでWebページの写真をドラッグしてメールアプリの新規メッセージに貼り付けるというような、インタラクティブなアプリ連携が可能になります。コンテンツをドラッグしている間に、ユーザはマルチタスクで他のアプリにアクセスしたり、ホーム画面に戻ったり、画面下部から上にスワイプしてDockを表示させることもできたりします。

```
ノート
アプリ間でコンテンツをドラッグ＆ドロップすると、必ず移動ではなく複製になります。
```

## ドラッグ＆ドロップ対応

ドラッグ＆ドラッグは効率的で直感的な機能であり、ユーザはシステム全体で広く実装されていることを期待します。もしあなたのアプリにテキスト、写真、動画、オーディオ、その他コンテンツ（移動、コピー、挿入する可能性のあるもの）が含まれている、もしくはそれらを生成する場合は、ドラッグ＆ドロップに対応すべきです。

**すべての選択可能なコンテンツ、編集可能なコンテンツでドラッグ＆ドロップを利用できるようにしましょう。** 選択可能なコンテンツはドラッグ可能にし、編集可能なコンテンツはドロップしたコンテンツを受け入れるようにしましょう。また、アプリがこれらの領域でコピー＆ペーストができるようにしてください。

**妥当だと思われる場合は、コントロールにコンテンツをドロップできるようにしましょう。** 一般的に、テキストフィールドのようなデータ入力や選択などができるものが、ドロップされたコンテンツが受け入れられるよう設定しておくと良いです。

**可能な限り、標準のテキストビューやテキストフィールドを使用してください。** これらシステムが提供する要素には元からドラッグ＆ドロップがサポートされています。関連するガイダンスとして、[Text Fields](https://developer.apple.com/design/human-interface-guidelines/ios/controls/text-fields/)と[Text Views](https://developer.apple.com/design/human-interface-guidelines/ios/views/text-views/)もご覧ください。開発者向けガイダンスは[UITextField](https://developer.apple.com/documentation/uikit/uitextfield)と[UITextView](https://developer.apple.com/documentation/uikit/uitextview)をご覧ください。

[スクショ]

**効率を上げるために、複数アイテムのドラッグ＆ドロップに対応することを検討してください。** 多くのアプリでは、1本の指で1つのアイテムをドラッグすることができ、ドラッグ中は他の指で追加アイテムをタップして選択することができます。これら選択されたアイテムは一緒に移動し、元々選択していたアイテムの下に重ねて表示されます。次にユーザはアイテムをグループとしてドラッグし、目的の場所にドロップします。例えばホーム画面では複数のアプリのアイコンを選択、ドラッグして一気にフォルダ格納することができます。写真アプリのようにいくつかのアプリでは、ドラッグする前から複数アイテムを選択できるモードが用意されているアプリもあります。

[スクショ]

**アプリ内でコンテンツをドラッグ＆ドロップしたときに移動にするのかコピーにするのか決めてください。** 一般的には移動元コンテナと移動先コンテナが一緒の場合（ドキュメント内でテキストをドラッグするなど）は移動になり、移動元コンテナと移動先コンテナが別の場合（ドキュメント間、アプリ間など）はコピーになります。とはいえ常にそうなるわけではありません。何より、ドラッグ＆ドロップは直感的に動作するはずです。リマインダーアプリでは人々の予想通り、リスト間でリマインダーをドラッグするとコピーではなく移動になります。アプリ間でコンテンツをドラッグ＆ドロップすると、常にコピーになります。

**可能な限り、ドラッグ＆ドロップを元に戻せるようにしましょう。** ユーザが間違った場所にコンテンツをドロップしてしまった場合、元に戻す機能を利用してアプリを元の状態に戻せるようにすべきです。つまり、ドロップしたコンテンツをドロップしたコンテンツを削除し、もしアプリ内の他の場所から移動していた場合は、元の場所に復元できるようにします。

**スプリングローディングを有効にすることを検討してみてください。** スプリングローディングによって、ユーザは選択したコンテンツをドラッグ、一時停止するときにコンテンツを落とすことなくボタンやセグメンティッドコントロールなどの特定のコントロールをアクティブにすることができます。例えばメールアプリでは、メッセージを選択してナビゲーションバーの戻るボタンまでドラッグすることでメールボックスの他の階層に移動することができます。ただし、スプリングローディングを、コントロールを有効にする唯一の方法にしてはいけません。スプリングローディングは機能に気づくための補足的なものとして使ってください。多くの場合、スプリングロードされたコントロールはタップジェスチャーにも反応するはずです。開発者向けのガイダンスは[UISpringLoadedInteraction](https://developer.apple.com/documentation/uikit/uispringloadedinteraction)をご覧ください。

## ドラッグコンテンツの提供

**必要に応じて、ドラッグされたアイテムのプレビューをカスタマイズしましょう。** 普通、ユーザの指の下に表示されるプレビューは、ドラッグされているコンテンツを半透明にした表示になります。この表示によって、コンテキストを提供したり、ドラッグの最中であることを示したり、ユーザがコンテンツの下にある目的地を見たりすることができます。

**可能な限り、忠実度の高いものから低いものの順に、複数のデータ表現を提供してください。** 例えば線画の場合、PDFのベクター表現、透過がかかった可逆性PNG画像、透過がかかってない非可逆JPEG画像の順で提供することができます。このようにして、受信する側はインポートできる最高品質の表現を選択できます。

**適用できるなら、データの最もリッチな形式として、カスタムオブジェクトのネイティブバージョンを提供しましょう。** 例えば、チャートをドラッグできるアプリでは、最初にネイティブのチャートオブジェクトを提示します。その後、チャートオブジェクトをサポートしてないアプリのために、チャートの画像バージョンのような代替物を提供すべきです。

**アプリのコンテンツの送信に時間がかかる場合や、リソースが大量に必要な場合は、ファイルプロバイダエクステンションを実装してください。** ファイルプロバイダエクステンションは転送プロセスを管理し、アプリが実行されていないときでも転送が完了するようにしてくれます。転送プロセスはユーザがコンテンツをドロップするまで開始されないことには注意してください。開発者向けガイダンスは[NSFileProviderExtension](https://developer.apple.com/documentation/fileprovider/nsfileproviderextension)をご覧ください。

**アプリコンテンツの転送に時間がかかるようなら、進捗状況を教えましょう。** コンテンツをダウンロードする必要がある場合や、ファイルが大きくて複製に時間がかかる場合は、進捗情報を提供しましょう。最低でもコンテンツの合計サイズを提供して、転送先が残り時間を計算して進捗状況を表示できるようにしましょう。開発者向けガイダンスは[NSProgress](https://developer.apple.com/documentation/foundation/progress)を参照してください。

## ドロップされたコンテンツの受け入れ

**視覚的な手がかりを使ってドロップ先になりうるところを特定し、ドロップコンテンツのエフェクトを表示します。** ハイライト、挿入時に現れるインジケータ、アニメーションなどは、ドロップ可能な場所を特定するための良い手段です。コンテンツをドラッグすると微妙に点滅して色が変わったり、文章の段落がドラッグ中の画像のために空間が空いたりします。画面上に複数の移動先候補がある場合は、一度に1つずつ識別します。移動元と移動先のコンテナが同じ場合は、コンテンツが移動元から離れてドラッグされた後に再度移動元に戻ってきた場合を除き、ハイライト表示は不要です。コンテンツがドロップされたり、移動先の上に位置していない場合は、ハイライト表示が消えているようにしてください。

**適切だと思われる場合は、自動で移動先のコンテンツをスクロールさせてください。** コンテンツが移動先の範囲外にドラッグされた場合、アプリ側は移動先のコンテンツをスクロールするか、ユーザがまったく別の移動先でドラッグを継続するのかを判断しなければいけません。もしユーザがドラッグし続けるのを許容する場合は、ドラッグされているアイテムがその上に来たときに自動的にスクロールする領域を定義しておくことを検討してください。例えばメールアプリで長い下書きのメッセージは、コンテンツが本文エリアの上部もしくは下部にドラッグされると自動的にスクロールします。標準のテキストビューとテキストフィールドは自動的にこの動きになります。